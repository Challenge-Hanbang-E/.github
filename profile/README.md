# í•œë°©ì— ê²€ìƒ‰í•˜ê³  í•œë°©ì— ì£¼ë¬¸í•˜ëŠ” e-commerce

![image](https://user-images.githubusercontent.com/43159295/217750814-2525feb1-de89-4748-9314-c81265069410.png)


**Hanbang-e í”„ë¡œì íŠ¸ ìì„¸íˆ ë³´ê¸°** ğŸ‘‰ [ë…¸ì…˜ ë°”ë¡œê°€ê¸°](https://extreme-wall-e0e.notion.site/hanbang-e-406c7cb8500b4361b68994a61e7d7ae7)


## í”„ë¡œì íŠ¸ ì†Œê°œ
ì•½ 180ë§Œê°œ ì´ìƒì˜ ë°ì´í„°ì—ì„œ ë§¤ì¼ 1ë§Œê°œì˜ ì‹ ìƒí’ˆì˜ ë°ì´í„°ë“¤ì´ ì¶”ê°€ë˜ëŠ” ì´ì»¤ë¨¸ìŠ¤ ì‚¬ì´íŠ¸


## íŒ€ì›

<table>
  <tr>
    <td align="center"><b>Team Leader</b></td>
    <td align="center"><b>Developer</b></td>
    <td align="center"><b>Developer</b></td>
    <td align="center"><b>Developer</b></td>
    <td align="center"><b>Developer</b></td>
</tr>
  <tr>
    <td>
        <a href="https://github.com/yejin0718">
            <img src="https://avatars.githubusercontent.com/u/83577996?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/tjvm0877">
            <img src="https://avatars.githubusercontent.com/u/28504937?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/seunGit">
            <img src="https://avatars.githubusercontent.com/u/110602191?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/m1naworld">
            <img src="https://avatars.githubusercontent.com/u/85235063?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/yanJuicy">
            <img src="https://avatars.githubusercontent.com/u/43159295?v=4" width="100px" />
        </a>
    </td>
  </tr>

  <tr> 
    <td align="center"><a href="https://github.com/yejin0718">ê¹€ì˜ˆì§„</a></td>
    <td align="center"><a href="https://github.com/tjvm0877">ê¹€ì¬í˜„</a></td>
    <td align="center"><a href="https://github.com/seunGit">ë¯¼ìŠ¹ê¸°</a></td>
    <td align="center"><a href="https://github.com/m1naworld">ì†¡ë¯¼ì•„</a></td>
    <td align="center"><a href="https://github.com/yanJuicy">ì´í•œì£¼</a></td>
  </tr>
</table>

## ê¸°ê°„
2022.12.30 ~ 2023.02.09

## ì»¤ë®¤ë‹ˆì¼€ì´ì…˜
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"> <img src="https://img.shields.io/badge/slack-4A154B?style=for-the-badge&logo=slack&logoColor=white"> <img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white">


## ê¸°ìˆ  ìŠ¤íƒ
### Application
![HTML5](https://img.shields.io/badge/html5-%23E34F26.svg?style=for-the-badge&logo=html5&logoColor=white) ![CSS3](https://img.shields.io/badge/css3-%231572B6.svg?style=for-the-badge&logo=css3&logoColor=white) ![jQuery](https://img.shields.io/badge/jquery-%230769AD.svg?style=for-the-badge&logo=jquery&logoColor=white)

![Java](https://img.shields.io/badge/java-%23ED8B00.svg?style=for-the-badge&logo=java&logoColor=white) ![Gradle](https://img.shields.io/badge/Gradle-02303A.svg?style=for-the-badge&logo=Gradle&logoColor=white) ![Spring Boot](https://img.shields.io/badge/springboot-green?style=for-the-badge&logo=springboot&logoColor=white)


### Test
![Postman](https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=postman&logoColor=white) ![JUnit5](https://img.shields.io/badge/JUnit5-green?style=for-the-badge&logo=junit5&logoColor=white)


### Database
![MySQL](https://img.shields.io/badge/mysql-%2300f.svg?style=for-the-badge&logo=mysql&logoColor=white) ![Redis](https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white)


### Infra
![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white) ![GitHub Actions](https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white) 	![Google Cloud](https://img.shields.io/badge/GoogleCloud-%234285F4.svg?style=for-the-badge&logo=google-cloud&logoColor=white) ![AWS](https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white)


### Crawling
![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54) ![Selenium](https://img.shields.io/badge/Selenium-%2343B02A?style=for-the-badge&logo=selenium&logoColor=white)


### Search
![ElasticSearch](https://img.shields.io/badge/-ElasticSearch-005571?style=for-the-badge&logo=elasticsearch) ![Logstash](https://img.shields.io/badge/Logstash-%23005571?style=for-the-badge&logo=logstash&logoColor=white)


## ì•„í‚¤í…ì²˜ 
<img width="851" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-02-07 á„‹á…©á„’á…® 4 22 18" src="https://user-images.githubusercontent.com/85235063/217175760-32186efd-ecb7-424e-8aaa-545408d149c3.png">


## CI / CD
![image](https://user-images.githubusercontent.com/43159295/217760061-32c0ae39-3909-44a6-87a6-3d776b4efddc.png)


## ERD
![image](https://user-images.githubusercontent.com/43159295/217777911-37378901-610a-4765-a5eb-f14731f4dfc5.png)


## í•µì‹¬ ê¸°ëŠ¥
### ğŸ’¾ ë°ì´í„° íŒŒì´í”„ë¼ì¸ 
- ë°ì´í„° í¬ë¡¤ë§ë¶€í„° logstashí™œìš© elasticsearch ë°ì´í„° ì ì¬ ê³¼ì • ìë™í™” 
<img width="1256" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-02-07 á„‹á…©á„’á…® 5 41 13" src="https://user-images.githubusercontent.com/85235063/217194782-b5d0e5f2-6ef5-47b2-8796-ca889c5310d9.png">

### ğŸ” ìƒí’ˆ ê²€ìƒ‰
- 1ì´ˆ ì´ë‚´ì˜ ìƒí’ˆ ê²€ìƒ‰ ì‘ë‹µ(ëª©í‘œë¡œ í–ˆë˜ Latency ê°’ ë‹¬ì„±)
- `íŒë§¤ëŸ‰ ìˆœ`, `ê°€ê²© ë‚®ì€ìˆœ`, `ê°€ê²© ë†’ì€ìˆœ` ì •ë ¬ ì œê³µ

### ğŸ“¦ ìƒí’ˆ ì£¼ë¬¸ 
- ëŒ€ê·œëª¨ íŠ¸ë˜í”½ì—ì„œë„ ë™ì‹œì„± ë¬¸ì œ ì—†ì´ ì£¼ë¬¸ ì²˜ë¦¬ 
- Redis + Redissoní™œìš© ë¶„ì‚°ë½ êµ¬í˜„ 

### ğŸ—‚ï¸ ì¬ì…ê³  ë°ì´í„° ì¼ê´„ ì²˜ë¦¬ 
- ìŠ¤í”„ë§ ë°°ì¹˜ í™œìš© ì¬ê³ ëŸ‰ ì—…ë°ì´íŠ¸ 


## íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ë° ì„±ëŠ¥ ê°œì„ 

### 1. ë¹„íš¨ìœ¨ì ì¸ ë°ì´í„° ìˆ˜ì§‘ ë° ì €ì¥ ë¡œì§ 
**[ë¬¸ì œìƒí™©]** 

ë°ì´í„° ìˆ˜ì§‘ì‹œ í¬ë¡¤ë§ê³¼ ë™ì‹œì— RDSì™€ ë°”ë¡œ í†µì‹ í•˜ì—¬ ë°ì´í„° í•˜ë‚˜ì”© ì €ì¥í•˜ëŠ” ë¡œì§. 
RDSë¡œ ë°”ë¡œ ë°”ë¡œ ì „ì†¡í•˜ë¯€ë¡œ, í†µì‹  íšŸìˆ˜ëŠ” ë°± ë§Œê±´ ì´ìƒì´ë©° ì‹œê°„ ë˜í•œ ì˜¤ë˜ ê±¸ë¦¼. 
ë˜í•œ DBì— ë°ì´í„°ê°€ ë‚ ì•„ê°”ì„ ë•Œ ë‹¤ì‹œ (ì—„ì²­ë‚œ ì‹œê°„ì„ ë“¤ì—¬) í¬ë¡¤ë§ì„ í•´ì¤˜ì•¼ í•˜ëŠ” ë¬¸ì œ ë°œìƒ

**[í•´ê²°ë°©ì•ˆ]**

í¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ JsoníŒŒì¼ì— ì ì¬ í›„ íŒŒì¼ ë‹¹ Bulk Insertë¬¸ì„ í™œìš©í•˜ì—¬ í•œë²ˆì— RDSì— ì €ì¥


**[ê²°ê³¼]**
- í¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ íŒŒì¼ë¡œ ë”°ë¡œ ëª¨ì•„ë‘ì–´ ìµœì•…ì— ìƒí™©ì„ ëŒ€ë¹„
- Bulk Insertë¬¸ì„ í™œìš©í•˜ì—¬ RDS í†µì‹  íšŸìˆ˜ ë° ì €ì¥ ì‹œê°„ ë‹¨ì¶• (ì•½ 1ë§Œ 3ì²œê°œì˜ ë°ì´í„° ì ì¬ ì‹œê°„: ì•½ 4së¡œ ì¤„ì–´ë“¬)
<br/>


### 2. ê²€ìƒ‰ ì„±ëŠ¥ ê°œì„ 
- ì„±ëŠ¥ ê°œì„  ê¸°ì¤€: API Latency
- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ë°©ë²•: Artilleryí™œìš© ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì§„í–‰ â†’ `ìœ ì € 1ëª…ì˜ ë‹¨ì¼ ìš”ì²­ 100ë²ˆ ê²°ê³¼(response time metrics (p50, p95, p99, min and max))` [@ê²€ìƒ‰ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸](https://extreme-wall-e0e.notion.site/492d10e38910435197b836964544b793)

- #### ì„±ëŠ¥ ê°œì„  ê³¼ì • 

  <details>
  <summary>1. ìƒí’ˆëª…(Product í…Œì´ë¸” name ì»¬ëŸ¼) index</summary>
  <div markdown="1">
  <br/>
  
  - **ê²€ìƒ‰ ì¡°ê±´ `like '%word%'`ëŠ” ì¸ë±ìŠ¤ë¥¼ íƒ€ì§€ ì•Šì•„ ì†ë„ ê°œì„  x** <br/>
  <br/>
  
  > ë”ìš± ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ë§í¬ë¥¼ ì°¸ì¡°
  - [@ê²€ìƒ‰ ì„±ëŠ¥ ê°œì„  - column index, index êµ¬ì¡°](https://extreme-wall-e0e.notion.site/column-index-792619f15ed3463c9dcfb4d1714fdfc5)
  - [@ê²€ìƒ‰ ì„±ëŠ¥ ê°œì„  - column index2, ì‹¤í–‰ê³„íš](https://extreme-wall-e0e.notion.site/2-88d78b9337c64b89b2fb8833e8bd2aed)
  <br/>
  
  </details>
  
  <details>
  <summary>2. full-text index</summary>
  <div markdown="1">
  
  - `ngram parser` ì‚¬ìš© 
  - search typeì€ `ë¶ˆë¦° ëª¨ë“œ`,êµ¬ë¬¸ ê²€ìƒ‰ì€ `+`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ê²€ìƒ‰í•œ ë‹¨ì–´ê°€ í•„ìˆ˜ì ìœ¼ë¡œ ë“¤ì–´ê°„ ìƒí’ˆëª…ì´ ì¡°íšŒë˜ë„ë¡ ì¿¼ë¦¬ êµ¬ì„±
 
  -  ëŒ€ëµ ëŒ€ë¶€ë¶„ì˜ í‚¤ì›Œë“œ ì‘ë‹µ ìµœëŒ€ì‹œê°„ì´ 2ì´ˆë‚´ë¡œ í–¥ìƒë˜ì—ˆì§€ë§Œ, íŠ¹ì • í‚¤ì›Œë“œì—ì„œëŠ” ì‘ë‹µ ì†ë„ê°€ í™•ì—°íˆ ëŠ¦ì–´ì§ì„ ë°œê²¬ 
  -  ì‘ë‹µ ìµœëŒ€ ì‹œê°„ ëª©í‘œ 1ì´ˆë¥¼ ë‹¬ì„±í•˜ì§€ ëª»í•˜ì—¬ elasticsearch ë„ì…
  <br/>
  
  > ë”ìš± ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ë§í¬ë¥¼ ì°¸ì¡°
  - [@ê²€ìƒ‰ ì„±ëŠ¥ ê°œì„  - full text index](https://extreme-wall-e0e.notion.site/full-text-index-2-52e0ec895d2749d599078255e1b5b3c3) 
  
  <br/>
  
   </details>
   
  <details>
  <summary>3. elasticsearch</summary>
  <br/>
  
  - ëª©í‘œë¡œ í–ˆë˜ API Latencyì¸ 1ì´ˆ ì´ë‚´ ë‹¬ì„± ğŸ‰ 
  - elasticsearchëŠ” ì—­ì¸ë±ìŠ¤ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ê²€ìƒ‰ì†ë„ê°€ ë¹ ë¦„ 
  <br/>
  
  > ë”ìš± ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ë§í¬ë¥¼ ì°¸ì¡°
  - [@ê²€ìƒ‰ ì„±ëŠ¥ ê°œì„  - elasticsearch](https://extreme-wall-e0e.notion.site/Elasticsearch-a40d611cd7b34f88b4774a7a42a083cc)
  
  <br/>
  
  </details>

  **í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê¸°ë¡* ğŸ‘‰ 
  [í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê¸°ë¡_í•œë°©ì—](https://docs.google.com/spreadsheets/d/1sqh296eSPjw4vkJcYQfjMg1eFdqQjREh-nOYRqOEW3s/edit?usp=sharing) <br/>
  **í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì´ ì •ë¦¬* ğŸ‘‰ [Index í™œìš© ê²€ìƒ‰ ì„±ëŠ¥ ìµœì¢… ì •ë¦¬ë³¸](https://extreme-wall-e0e.notion.site/Index-e763367a15f140749785fcd84ec008ea)
<br>

### 3. ë™ì‹œì„± ì œì–´

#### - ë™ì‹œì„± ì œì–´ ë°©ì‹ ë¹„êµ
1. Redisì™€ Redissoní´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ìš©í•œ ë¶„ì‚°ë½ êµ¬í˜„
2. DBMS(Mysql)ì˜ ë½ ê¸°ëŠ¥ì„ ì´ìš©í•œ Pessimistic Lock êµ¬í˜„

- ì„±ëŠ¥ ë¹„êµ
  - í…ŒìŠ¤íŠ¸ í™˜ê²½ : JMeterë¥¼ ì´ìš©í•˜ì—¬ ë™ì‹œì„±ë¬¸ì œê°€ ì¼ì–´ë‚˜ëŠ” ë™ì¼í•œ ì¡°ê±´ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰
  - í…ŒìŠ¤íŠ¸ ì¡°ê±´ : Number Of Threads = 1000, Ramp-up period = 1, Loop Count = 1ì˜ ì¡°ê±´ìœ¼ë¡œ ì´ Sampleìˆ˜ëŠ” ê°ê° 10000ê°œ
  
      ||Throughput|Min|Max|Average|
      |---|---|---|---|---|
      |Redis|6.8/sec|122ms|75098ms|10579ms|
      |DBMS|6.4/sec|99ms|19625ms|9483ms|

- ê²°ë¡ 
  - SQL DB Lock
    - **ë³„ë„ì˜ Redis ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìš´ìš©í•˜ê³  ìˆì§€ ì•Šì„ ê²½ìš° ì¸í”„ë¼ì˜ ë¶€ë‹´ ì—†ì´ í™œìš©í•´ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì **
    - **SQL connectionì— ë¶€ë‹´ì´ ë§ì´ ê°€ë©° Redisì— ë¹„í•´ì„œëŠ” ë¬´ê²ë‹¤**ëŠ” ë‹¨ì ì´ ìˆìŒ
  - **Redis**
    - **Redisson Pub/Subë¥¼ ì´ìš©í•˜ì—¬ Lock íšë“ ì¬ì‹œë„ë¥¼ ìµœì†Œí™”í•˜ì—¬** Redisì— ê°€í•´ì§€ëŠ” ë¶€ë‹´ì„ ìµœì†Œí™”
    - **ë³„ë„ì˜ íŠ¸ëœì­ì…˜ ì‘ì—… ì²˜ë¦¬ì™€ ìƒˆë¡œìš´ DBì„ìœ¼ë¡œ ë†’ì€ ì¶”ê°€ë¹„ìš©ì´ ë°œìƒ**
  
  #### â—ï¸ JMeterë¥¼ ì´ìš©í•œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìœ ì˜ë¯¸í•œ ì„±ëŠ¥ì˜ ì°¨ì´ì ì€ ì—†ì—ˆìŒ. í•˜ì§€ë§Œ í˜„ì¬ ìƒí’ˆ ìƒì„¸ì •ë³´ ìºì‹±ì„ ìœ„í•´ì„œ ì´ë¯¸ Redisì„œë²„ê°€ ì¡´ì¬í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— **Redisë¥¼ ì´ìš©í•œ ë¶„ì‚°ë½ì„ í™œìš©í•˜ê¸°ë¡œ ê²°ì •**
  
  <br/>
  
  > ë”ìš± ìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ ë§í¬ë¥¼ ì°¸ì¡°
  - [@ë™ì‹œì„± ì œì–´ ì •ë¦¬](https://extreme-wall-e0e.notion.site/b7696e3e4a234fc29ccac3512ab77c79)
  

